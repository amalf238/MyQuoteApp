<h3 style="padding-top: 10px;">Search for quotes by category</h3>

<%# Form to search for quotes by category %>
<%= form_tag search_path, method: :get do %>
    <div class="form-group" style="padding-bottom: 10px;">
    <%= text_field_tag :category_query, params[:category_query], placeholder: 'Enter a category', class: "form-control" %>
</div>
<%# Submit button to begin the search %>
<%= submit_tag 'Search Quotes', class: "btn btn-primary" %>
<% end %>

<%# Checks if the category query is present %>
<% if params[:category_query].present? %>
  <% if @quotematch.present? %>
    <h4 style="padding-top: 15px;">Results:</h4>
<%# Loop through each matching quote %>
    <% @quotematch.each do |quote| %>
      <div>
<%# Checks if the quote has any associated categories %>
        <% if quote.categories.any? %>
<%# Loop through each category associated with the current quote %>
          <% quote.categories.each do |category| %>
            <h5 class="text-primary"><%= category.categoryName %></h5>
          <% end %>
        <% else %>
<%# Display Uncategorized if the category does not exist %>
          <h5 class="text-primary">Uncategorized</h5>
        <% end %>
        <p><%= quote.quoteText %> [<a href="/quotes/<%= quote.id %>">Read full quote</a>]</p>
        <br />
      </div>
    <% end %>
  <% else %>
<%# Display a message if there are no matching quotes for the entered category %>
    <p>No matching quotes found</p>
  <% end %>
<% end %>